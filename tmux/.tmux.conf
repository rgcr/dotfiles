
#################################
#           BINDINGS
#################################

# C-a prefix
unbind C-b
set -g prefix C-a

# Allows us to use C-a a <command> to send commands to
# a TMUX session inside another TMUX session
bind-key a send-prefix

# 'r' - reload configuration {{{
unbind r
bind r source-file ~/.tmux.conf \; display 'Config reloaded...'
# }}}

# vi mode {{{
set-window-option -g mode-keys vi

## copy mode
bind v copy-mode \; display 'Copy mode!'

## keeps the default binding also
bind [ copy-mode \; display 'Copy mode!'

## paste
unbind p
bind p paste-buffer

# 'v'
bind-key -T copy-mode-vi v send-keys -X begin-selection

# 'y'
bind-key -T copy-mode-vi y send-keys -X copy-selection

# }}}

#  list all paste buffers {{{
unbind b
bind b list-buffers
# }}}

# Choose which buffer to paste interactively from a list  {{{
#unbind =
unbind P
bind P choose-buffer
# }}}

# kill session {{{
unbind q
bind q confirm-before "kill-session"
# }}}

# kill tmux {{{
unbind Q
bind Q confirm-before -p "Confirm 'KILL TMUX'? (y/n)" "kill-server"
# }}}

# new window like screen {{{
unbind ^C
bind ^C new-window
unbind c
bind c new-window
# }}}

# detach {{{
unbind ^D
bind ^D detach
# }}}

# list clients {{{
unbind *
bind * list-clients
# }}}

# switch to last window {{{
unbind ^A
bind l last-window
# }}}

# go to next window {{{
unbind Space
bind Space next-window
unbind Enter
bind Enter next-window
# }}}

# got to previous window <Bspace> {{{
unbind BSpace
bind BSpace previous-window
# }}}

# list windows {{{
unbind w
bind w list-windows
# }}}


# jump to a pane (shows a visible indicator) {{{
unbind g
bind g display-panes
# }}}

# kill window {{{
unbind K
bind K confirm-before "kill-window"
unbind k
bind k confirm-before "kill-window"
# }}}

# kill pane {{{
unbind x
bind x confirm-before "kill-pane"
unbind X
bind X confirm-before "kill-pane"
# }}}

# redisplay {{{
unbind ^R
bind ^R refresh-client
# }}}

# vertical split {{{
unbind |
bind | split-window -h -p 50 -c "#{pane_current_path}"
# }}}

# horizontal split {{{
unbind %
bind - split-window -v -p 50 -c "#{pane_current_path}"
# }}}

# got to the next pane {{{
unbind Tab
bind Tab select-pane -t:.+
# }}}

# go to the previous pane {{{
unbind BTab
bind BTab select-pane -t:.-
# }}}


# pane movement {{{
## break pane
unbind b
bind b confirm-before "break-pane"

## join from 'j'
unbind j
bind j command-prompt -p "join pane from "  "join-pane -s '%%'"

## joint to
unbind s
bind s command-prompt -p "send pane to "  "join-pane -t '%%'"

# }}}

# Change layout {{{
unbind '"'
bind '"' next-layout
# }}}

# exec man {{{
unbind /
bind / command-prompt -p "man:" "split-window 'exec man %%'"
# }}}

# save history {{{
unbind S
bind-key S command-prompt -p 'save history to filename:' -I '~/tmux.history' 'capture-pane -S -; save-buffer %1 ; delete-buffer'
# }}}


#################################
#           OPTIONS
#################################

# no delay to cancel prefix
set -sg escape-time 0

# Set window notifications
setw -g monitor-activity on
set -g visual-activity on

# Colors!
#set -g default-terminal "rxvt-256color"
set -g default-terminal 'screen-256color'

# history limit
set -g history-limit 10000

# Start counting at 1
set-option -g allow-rename off
set -g base-index 1
set-window-option -g pane-base-index 1
set -g display-panes-time 1001

# Set Window Title
set-window-option -g automatic-rename on
set -g set-titles on
set -g set-titles-string 'tmux: #T'

# Reorder windows
# ctrl+sfhit + [left|right] {{{
bind-key -n C-S-Left swap-window -t -1
bind-key -n C-S-Right swap-window -t +1
# }}}

# Border Colors {{{
set -g pane-border-fg black
set -g pane-active-border-fg black
set -g display-panes-colour white
set -g display-panes-active-colour red
# }}}


#################################
#          SOURCES
#################################

# osx ?
if-shell 'test "$(uname)" = "Darwin" && test -e ~/.tmux/.tmux.osx.conf' 'source-file ~/.tmux/.tmux.osx.conf'

# load a theme
if-shell 'test -e ~/.tmux/themes/tmux.theme.conf' 'source-file ~/.tmux/themes/tmux.theme.conf'

