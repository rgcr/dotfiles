
#################################
#           BINDINGS
#################################

# C-a prefix
unbind C-b
set -g prefix C-a
# Allows us to use C-a a <command> to send commands to a TMUX session inside
# another TMUX session
bind-key a send-prefix

# reload configuration 'r'
unbind r
bind r source-file ~/.tmux.conf \; display 'Config reloaded...'

# vi mode
set-window-option -g mode-keys vi
# copy mode 'v'
#unbind [
bind v copy-mode \; display 'Copy mode!'
bind [ copy-mode \; display 'Copy mode!'
# paste 'p'
unbind p
bind p paste-buffer
# 'v'
bind-key -T copy-mode-vi v send-keys -X begin-selection
# 'y'
bind-key -T copy-mode-vi y send-keys -X copy-selection
# list paste buffers 'b'
unbind b
bind b list-buffers
# choose which buffer to paste from. 'P'
#unbind =
unbind P
bind P choose-buffer

# kill session 'q'
unbind q
bind q confirm-before "kill-session"

# kill tmux 'Q'
unbind Q
bind Q confirm-before -p "Confirm 'KILL TMUX'? (y/n)" "kill-server"

# new window like screen '^C' 'c'
unbind ^C
bind ^C new-window
unbind c
bind c new-window

# detach '^D' 'd'
unbind ^D
bind ^D detach

# displays '*'
unbind *
bind * list-clients

# title 'A'
unbind A
#bind A command-prompt "rename-window %%"

# select last window '^l'
unbind ^A
bind l last-window

# select next window <space>
unbind Space
bind Space next-window
unbind Enter
bind Enter next-window

# select previous window <Bspace>
unbind BSpace
bind BSpace previous-window

# list windows 'w'
unbind w
bind w list-windows


# display and go to a pane 'g'
unbind g
bind g display-panes

# kill window 'K' 'k'
unbind K
bind K confirm-before "kill-window"
unbind k
bind k confirm-before "kill-window"

unbind x
bind x confirm-before "kill-pane"
unbind X
bind X confirm-before "kill-pane"

# redisplay '^R'
unbind ^R
bind ^R refresh-client

# vertical split '|'
unbind |
bind | split-window -h -p 50 -c "#{pane_current_path}"
# horizontal split
unbind %
bind - split-window -v -p 50 -c "#{pane_current_path}"

# select next pane <tab>
unbind Tab
bind Tab select-pane -t:.+
# select previous pane <btab>
unbind BTab
bind BTab select-pane -t:.-

# pane movement
## break pane 'b'
unbind b
bind b confirm-before "break-pane"
## join from 'j'
unbind j
bind j command-prompt -p "join pane from "  "join-pane -s '%%'"
## joint to 's'
unbind s
bind s command-prompt -p "send pane to "  "join-pane -t '%%'"

# Change layout
unbind '"'
bind '"' next-layout

unbind /
bind / command-prompt -p "man:" "split-window 'exec man %%'"

unbind S
bind-key S command-prompt -p 'save history to filename:' -I '~/tmux.history' 'capture-pane -S -; save-buffer %1 ; delete-buffer'


#################################
#           OPTIONS
#################################

# no delay to cancel prefix
set -sg escape-time 0

# Set the repeat-time to 1 second so that multiple commands can be entered
# without sending the prefix-key within 1 second. Commands are made repeatable
# by -r option of bind-key. By default it is 500 ms.
#set -g repeat-time 1000

# Set window notifications
setw -g monitor-activity on
set -g visual-activity on

# mouse support
#set -g mode-mouse on

# Colors!
#set -g default-terminal "rxvt-256color"
set -g default-terminal 'screen-256color'
set -g history-limit 10000

# Start counting at 1
set-option -g allow-rename off
set -g base-index 1
set-window-option -g pane-base-index 1
#set -g mouse-select-pane on
#setw -g automatic-rename off
set -g display-panes-time 1001

# Set Window Title
 set-window-option -g automatic-rename on
 set -g set-titles on
 set -g set-titles-string 'tmux: #T'

# Reorder windows ctrl+sfhit + [left|right]
bind-key -n C-S-Left swap-window -t -1
bind-key -n C-S-Right swap-window -t +1

# Border Colors
set -g pane-border-fg black
set -g pane-active-border-fg black
set -g display-panes-colour white
set -g display-panes-active-colour red

#################################
#          SOURCES
#################################

# osx ?
if-shell 'test "$(uname)" = "Darwin" && test -e ~/.tmux/.tmux.osx.conf' 'source-file ~/.tmux/.tmux.osx.conf'

# load a nice theme here :)
if-shell 'test -e ~/.tmux/.tmux.theme.conf' 'source-file ~/.tmux/.tmux.theme.conf'

#set -g -a terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

